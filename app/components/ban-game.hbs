<h2>Lobby: {{@roomName}}</h2>


<section>
  {{#if this.otherPlayerConnected}}
    {{#if this.deckSelectionPhase}}
      <h4 class="">
        {{#if this.otherPlayerDecksSubmitted }}
          Opponent submitted their decks, waiting on your response<WaitingDots />
        {{else}}
          <span class="dark-green">Player Connected:</span> Waiting for them to submit decks<WaitingDots />
        {{/if}}
      </h4>
      {{/if}}

    {{#if this.banSelectionPhase }}
      <h4 class="">
        {{#if this.opponentBannedDeck}}
          <span class="orange">Opoonent has chosen to ban {{this.opponentBannedDeck}}.</span> (Deck {{this.opponentBannedDeckIdx}})
        {{else}}
          {{#if this.otherPlayerBanSubmitted }}
            Opponent has banned a deck, waiting on your response<WaitingDots />
          {{else}}
            Waiting for opponent to ban a deck<WaitingDots />
          {{/if}}
        {{/if}}
      </h4>

      {{#if this.banSelected}}
        <h5>You have banned {{this.bannedDeck}}</h5>
      {{else}}
        <h5>Choose which deck to ban</h5>
      {{/if}}
      <form onsubmit={{action "banDeck"}}>
        <div class="pa1">
          <Input @name="op-deck" @value="0" @type="radio" id="op-deck-1" />
          <label for="op-deck-1" class="{{if (eq this.bannedDeckIdx '0') 'strike'}}">{{get this.opponentDeckList 0}}</label>
        </div>
        <div class="pa1">
          <Input @name="op-deck" @value="1" @type="radio" id="op-deck-2" />
          <label for="op-deck-2" class="{{if (eq this.bannedDeckIdx '1') 'strike'}}">{{get this.opponentDeckList 1}}</label>
        </div>
        <div class="pa1 mb3">
          <Input @name="op-deck" @value="2" @type="radio" id="op-deck-3" />
          <label for="op-deck-3" class="{{if (eq this.bannedDeckIdx '2') 'strike'}}">{{get this.opponentDeckList 2}}</label>
        </div>
        {{#if this.banSelected}}
          <button
            class="mb3 f5 shadow-4 bn bg-white dark-gray ph3 pv3"
            disabled="true">
            Ban Deck
          </button>
        {{else}}
          <button
            class="mb3 f5 shadow-4 shadow-hover bn bg-white dark-gray ph3 pv3"
            type="submit">
            Ban Deck
          </button>
        {{/if}}
      </form>
    {{/if}}

  {{else}}
    <h4 class="mono">Waiting for another player to connect<WaitingDots /></h4>
  {{/if}}
</section>



<section>
  {{#if this.decksSubmitted}}
    <h4>Decks submitted</h4>
    <p class="pa2">Deck 1:<br><span class="b">{{this.deck1}}</span></p>
    <p class="pa2">Deck 2:<br><span class="b">{{this.deck2}}</span></p>
    <p class="pa2">Deck 3:<br><span class="b">{{this.deck3}}</span></p>

  {{else}}
    <form onsubmit={{action "submitDecks"}}>
      <div class="mb3">
        <label for="deck-1" class="db mb1">Deck 1</label>
        <Input class="pa2 ba" id="deck-1" @value={{this.deck1}} type="text" />
      </div>

      <div class="mb3">
        <label for="deck-2" class="db mb1">Deck 2</label>
        <Input class="pa2 ba" id="deck-2" @value={{this.deck2}} type="text" />
      </div>

      <div class="mb3">
        <label for="deck-3" class="db mb1">Deck 3</label>
        <Input class="pa2 ba" id="deck-3" @value={{this.deck3}} type="text" />
      </div>
      {{#if this.otherPlayerConnected}}
        <button
          class="mb3 f5 shadow-4 shadow-hover bn bg-white dark-gray ph3 pv3"
          type="submit">
          Submit Decks
        </button>
      {{else}}
        <button
        type="submit"
          class="mr3 mb3 f5 shadow-4 bn bg-white gray ph3 pv3"
          disabled="true">
          Submit Decks
        </button> <span class="dark-red">Other player needs to connect first</span>
      {{/if}}
    </form>
  {{/if}}
</section>

<section class="mt5 code gray">
  <h4 class=" code pa0 ma0">Debug:</h4>
  {{#each this.messages as |message|}}
    <output class="db">{{message}}</output>
  {{/each}}
</section>
